<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Goppop的博客 - 记录技术学习和投机交易</title><meta name="author" content="Goppop"><meta name="copyright" content="Goppop"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="周期越大，结构越清晰">
<meta property="og:type" content="website">
<meta property="og:title" content="Goppop的博客">
<meta property="og:url" content="https://goppop.github.io/index.html">
<meta property="og:site_name" content="Goppop的博客">
<meta property="og:description" content="周期越大，结构越清晰">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://goppop.github.io/img/butterfly-icon.png">
<meta property="article:author" content="Goppop">
<meta property="article:tag" content="code技术,交易">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://goppop.github.io/img/butterfly-icon.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "Goppop的博客",
  "alternateName": [
    "记录技术学习和投机交易",
    "goppop.github.io"
  ],
  "url": "https://goppop.github.io/"
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://goppop.github.io/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=5.5.3-b1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Goppop的博客',
  isHighlightShrink: false,
  isToc: false,
  pageType: 'home'
}</script><meta name="generator" content="Hexo 8.1.1"></head><body><div id="web_bg" style="background-image: url(https://images.pexels.com/photos/1200252/pexels-photo-1200252.jpeg);"></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url(https://cdn.pixabay.com/photo/2021/03/29/08/22/peach-flower-6133330_1280.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Goppop的博客</span></a></span><div id="menus"></div></nav><div id="site-info"><h1 id="site-title">Goppop的博客</h1></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts nc" id="recent-posts"><div class="recent-post-items"><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/trading-log/%E4%BA%A4%E6%98%93/%E4%BA%A4%E6%98%93%E8%AE%B0%E5%BD%95%EF%BC%9AETH%20%E5%90%88%E7%BA%A6%E5%A4%9A%E5%8D%95/" title="交易记录">交易记录</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2025-12-21T16:00:00.000Z" title="发表于 2025-12-22 00:00:00">2025-12-22</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/trading-log/">交易记录</a></span></div><div class="content">交易记录：ETH 合约多单基本信息 日期：2025年12月19日  交易品种：ETH&#x2F;USDT 永续合约   方向：多头 开仓价格：$2,893   建仓金额：100,000 满仓   限价止损点：$2805   开仓逻辑好久没满仓了 这次继续捕捉熊牛转换（19号那天多次骗炮 最终还是跌不动 我依然认为牛市最后一跌已经结束 ） 期待后续记录 本月过山车坐麻了12-22 记录 19号建仓以后 我持续浮盈滚仓 一直把杠杆拉到20倍 现在持仓14万  这个持仓量是我最终持仓了 目前仓位浮盈77% 继续持有 其实不想这么激进的 但是我想到我以前考虑的我的风格 只做牛市最大一波 当时的位置依然是极佳的最大杠杆建仓点位 当然当时我的止损幅度也很夸张 现在想来是有点激进了 但是再来一次我依然选择这种激进的打法 继续持仓观察 并且我的止损点位调整到了2936  说一句预测吧 我第一止盈位置在3800附近  那个位置附近我大概会平仓80以上 尽人事听天命  如果错了 我就认（不是认输 是接受这次市场没做好准备的结果 我可以带着我的本金等待下一次机会） 除非这个市场完蛋了 不然我早晚有一次...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/code-learning/%E4%BB%A3%E7%A0%81%E5%BC%80%E5%8F%91%E5%AD%A6%E4%B9%A0/Java%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%EF%BC%88JUC%EF%BC%89%E9%AB%98%E7%BA%A7%E7%BB%84%E4%BB%B6%E4%B8%8E%E5%8E%9F%E7%90%86%EF%BC%9A%E4%BB%8E%20AQS%20%E5%88%B0%E5%B9%B6%E5%8F%91%E5%AE%B9%E5%99%A8%20(1)/" title="Java 并发编程（JUC）高级组件与原理：从 AQS 到并发容器">Java 并发编程（JUC）高级组件与原理：从 AQS 到并发容器</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2025-12-16T16:00:00.000Z" title="发表于 2025-12-17 00:00:00">2025-12-17</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/code-learning/">代码开发学习</a></span></div><div class="content">Java 并发编程（JUC）高级组件与原理：从 AQS 到并发容器摘要本文档旨在深入剖析 Java 并发工具包（JUC, Java Util Concurrent）中的核心高级组件与原理。我们将秉持**“合理符合实际、准确细节完备”**的原则，从并发编程的基石 JVM 优化出发，详细解析 AQS（AbstractQueuedSynchronizer）的底层机制，并扩展到 ReentrantLock、并发容器（如 ConcurrentHashMap）和 线程池 的实现细节，力求帮助读者彻底理解 JUC 的设计哲学和高性能秘密。 1. 并发基础：JVM 层的优化与保障1.1 synchronized 的锁升级机制synchronized 关键字是 Java 中最基本的同步机制，但在 JDK 1.6 之后，其性能得到了大幅优化，不再是传统意义上的“重量级锁”。JVM 引入了锁升级机制，以适应不同的竞争情况，从而减少锁竞争带来的性能开销。 锁的级别从低到高依次为：无锁 $\to$ 偏向锁 $\to$ 轻量级锁 $\to$ 重量级锁。    锁状态 适用场景 实现原理 性能特点    偏向...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/code-learning/%E4%BB%A3%E7%A0%81%E5%BC%80%E5%8F%91%E5%AD%A6%E4%B9%A0/Spring%20Boot%20%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E4%B8%8E%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%EF%BC%9AAOP%E3%80%81IOC%20%E4%B8%8E%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE/" title="Spring Boot 核心原理与源码解析：AOP、IOC 与自动配置">Spring Boot 核心原理与源码解析：AOP、IOC 与自动配置</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2025-12-16T16:00:00.000Z" title="发表于 2025-12-17 00:00:00">2025-12-17</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/code-learning/">代码开发学习</a></span></div><div class="content">Spring Boot 核心原理与源码解析：AOP、IOC 与自动配置摘要本文档旨在深入剖析 Spring Boot 框架背后的核心机制，重点聚焦于 IOC（控制反转）、AOP（面向切面编程） 和 自动配置 三大基石。我们将秉持**“源码分析、细节完备”的原则，通过对 Spring 核心源码（如 refresh() 方法、三级缓存、动态代理）的解读，帮助读者彻底理解 Spring Boot 如何实现其“约定大于配置”**的哲学，以及其高性能和灵活性的秘密。 1. 核心基石：IOC 容器的启动与初始化Spring Boot 的启动过程，本质上是 Spring IOC 容器的创建和刷新过程。 1.1 Spring Boot 启动流程概览SpringApplication.run() 方法是 Spring Boot 启动的入口。它主要完成了以下几个关键步骤：  创建 SpringApplication 实例：加载 Spring Boot 的配置信息。 监听器与环境准备：加载并运行各种 SpringApplicationRunListener，准备和配置 Environment（包括加载...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/code-learning/programming-basics/jvm/%E4%BB%A3%E7%A0%81%E5%BC%80%E5%8F%91%E5%AD%A6%E4%B9%A0/JVM-%E5%85%A5%E9%97%A8%E6%A6%82%E8%A7%88/" title="JVM-入门概览">JVM-入门概览</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2025-12-11T16:00:00.000Z" title="发表于 2025-12-12 00:00:00">2025-12-12</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/code-learning/">代码开发学习</a><i class="fas fa-angle-right article-meta-link"></i><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/code-learning/programming-basics/">01-编程语言基础</a><i class="fas fa-angle-right article-meta-link"></i><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/code-learning/programming-basics/jvm/">JVM</a></span></div><div class="content">JVM-入门概览 作者：文档状态：  概述Java 虚拟机（JVM，Java Virtual Machine）是 Java 平台的核心组成部分，它是一种抽象的计算机，通过在实际的计算机上模拟各种计算机功能来实现。JVM 的主要职责是执行 Java 字节码（Bytecode），将 Java 语言的“一次编写，到处运行”（Write Once, Run Anywhere, WORA）的理念变为现实。 JVM 位于操作系统之上，为 Java 程序提供了一个统一的运行环境。无论是 Windows、Linux 还是 macOS，只要安装了对应的 JVM 实现，Java 程序就能无缝运行，这极大地提高了 Java 应用程序的跨平台能力和可移植性。对于 Java 开发者而言，深入理解 JVM 的工作原理是迈向高级开发和性能优化的必经之路。 核心内容JVM 的核心内容主要围绕其体系结构、运行时数据区、垃圾收集机制和类加载机制展开。 1. JVM 体系结构JVM 体系结构主要由以下几个部分组成：    组件 职责    类加载器 (Class Loader) 负责查找、加载和初始化 Java 类文...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/code-learning/programming-basics/jvm/%E4%BB%A3%E7%A0%81%E5%BC%80%E5%8F%91%E5%AD%A6%E4%B9%A0/JVM-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/" title="JVM-垃圾回收机制详解">JVM-垃圾回收机制详解</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2025-12-11T16:00:00.000Z" title="发表于 2025-12-12 00:00:00">2025-12-12</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/code-learning/">代码开发学习</a><i class="fas fa-angle-right article-meta-link"></i><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/code-learning/programming-basics/">01-编程语言基础</a><i class="fas fa-angle-right article-meta-link"></i><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/code-learning/programming-basics/jvm/">JVM</a></span></div><div class="content">JVM-垃圾回收机制详解概述垃圾回收（Garbage Collection, GC） 是 Java 虚拟机（JVM）自动管理内存的核心机制。它负责自动发现并释放不再被程序引用的对象所占用的内存空间，从而避免了手动内存管理带来的内存泄漏和内存溢出问题 [1]。 GC 的整个过程可以概括为两个核心步骤：  垃圾识别：判断哪些对象是“存活”的，哪些是“死亡”的（即不再被引用的）。 垃圾收集：回收死亡对象所占用的内存空间。  在垃圾回收过程中，为了确保数据的一致性，JVM 常常需要暂停所有应用线程，这个现象被称为 Stop-The-World (STW)。STW 的时间长短是衡量一个垃圾收集器性能的重要指标，现代 GC 优化的主要目标之一就是尽量缩短或消除 STW 时间 。 核心内容1. 垃圾对象的判断判断对象是否存活主要有两种算法： 1.1 引用计数法 (Reference Counting)为每个对象设置一个引用计数器，每当有一个地方引用它时，计数器加 1；当引用失效时，计数器减 1。计数器为 0 的对象即为垃圾。  优点：实现简单，判定效率高。 缺点：难以解决对象间的循环引用问题，...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/code-learning/programming-basics/jvm/%E4%BB%A3%E7%A0%81%E5%BC%80%E5%8F%91%E5%AD%A6%E4%B9%A0/JVM-%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E8%AF%A6%E8%A7%A3/" title="JVM-内存模型详解">JVM-内存模型详解</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2025-12-11T16:00:00.000Z" title="发表于 2025-12-12 00:00:00">2025-12-12</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/code-learning/">代码开发学习</a><i class="fas fa-angle-right article-meta-link"></i><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/code-learning/programming-basics/">01-编程语言基础</a><i class="fas fa-angle-right article-meta-link"></i><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/code-learning/programming-basics/jvm/">JVM</a></span></div><div class="content">JVM-内存模型详解概述Java 虚拟机（JVM）内存模型，更准确地说是 JVM 运行时数据区（Runtime Data Areas），是Java虚拟机在执行Java程序过程中，将其管理的内存划分为若干个不同的数据区域。理解这些区域对于深入掌握Java程序的运行机制、内存分配、垃圾回收以及进行性能调优和故障排查至关重要 。 需要注意的是，JVM 运行时数据区（JVM Runtime Data Areas）与 Java 内存模型（Java Memory Model, JMM）是两个不同的概念。JVM 运行时数据区关注的是JVM如何划分和管理内存，而 JMM 则关注于在多线程环境下，变量在内存中的可见性、有序性和原子性等问题。本文档主要聚焦于前者，即 JVM 运行时数据区。 JVM 运行时数据区主要包含以下五个部分，它们根据是否被线程共享可以分为两大类：    内存区域 线程共享性 作用 可能发生的异常    程序计数器 (Program Counter Register) 线程私有 存储当前线程执行的字节码指令地址 无 (唯一不会发生 OOM 的区域)   Java 虚拟机栈 (J...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/code-learning/%E4%BB%A3%E7%A0%81%E5%BC%80%E5%8F%91%E5%AD%A6%E4%B9%A0/%E4%BB%A3%E7%A0%81%E5%BC%80%E5%8F%91%E5%AD%A6%E4%B9%A0-%E5%88%86%E7%B1%BB%E6%A6%82%E8%A7%88/" title="代码开发学习-分类概览">代码开发学习-分类概览</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2025-12-11T16:00:00.000Z" title="发表于 2025-12-12 00:00:00">2025-12-12</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/code-learning/">代码开发学习</a></span></div><div class="content">代码开发学习-分类概览 分类占位文章：本文档为”代码开发学习”分类的占位文章，用于在分类页面显示该分类的概览  分类结构本分类包含以下主要方向： 01-编程语言基础 Java核心 Java并发 JVM 设计模式  02-框架技术 Spring框架 Spring Boot Spring Cloud Alibaba Nacos Gateway Sentinel  03-中间件技术 Redis RabbitMQ RocketMQ Seata  04-数据库技术 MySQL  05-运维监控 Docker Arthas Elasticsearch Kibana  学习路径（待补充） 相关资源（待补充）  文档状态：📝 分类占位文章最后更新：2025-12-12 </div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/code-learning/%E4%BB%A3%E7%A0%81%E5%BC%80%E5%8F%91%E5%AD%A6%E4%B9%A0/%E6%89%A3%E8%B4%B9%E7%B3%BB%E7%BB%9F-%E4%BB%8E%E8%AE%BE%E8%AE%A1%E5%88%B0%E5%BC%80%E5%8F%91%E5%85%A8%E8%BF%87%E7%A8%8B/" title="算力平台扣费系统：从设计到开发全过程">算力平台扣费系统：从设计到开发全过程</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2025-12-09T16:00:00.000Z" title="发表于 2025-12-10 00:00:00">2025-12-10</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/code-learning/">代码开发学习</a></span></div><div class="content">算力平台扣费系统：从设计到开发全过程 本文记录了一个完整的分布式扣费系统的设计思路、技术选型、架构设计、核心实现以及踩坑经验，适合有一定Java开发经验的读者阅读。  目录 一、项目背景 二、需求分析 三、技术选型 四、架构设计 五、数据库设计 六、核心功能实现 七、关键技术点 八、踩坑与优化 九、测试与验证 十、总结与思考   一、项目背景1.1 业务场景这是一个算力租赁平台的扣费系统，主要业务场景包括：  包月预付费：用户购买包月算力，一次性扣除整月费用 按小时后付费：用户按小时使用算力，每小时自动续扣 退款处理：支持全额退款、部分退款、按订单退款、按扣费单退款 余额预警：提前通知用户余额不足，避免服务突然中断  1.2 核心挑战 资金安全：不能重复扣费，不能多退少退 高并发：支持大量用户同时扣费 幂等性：网络重试、系统故障恢复时不能重复扣费 系统解耦：与订单系统、资源系统解耦，通过消息队列异步通信 可追溯性：每笔扣费都有完整的流水记录，支持对账   二、需求分析2.1 功能需求2.1.1 扣费功能   功能 说明 优先级    包月扣费 一次性扣除整月费用 P0   按小时...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/code-learning/%E4%BB%A3%E7%A0%81%E5%BC%80%E5%8F%91%E5%AD%A6%E4%B9%A0/%E6%89%A3%E8%B4%B9%E7%B3%BB%E7%BB%9F%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/" title="扣费系统使用指南">扣费系统使用指南</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2025-12-09T16:00:00.000Z" title="发表于 2025-12-10 00:00:00">2025-12-10</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/code-learning/">代码开发学习</a></span></div><div class="content">扣费系统使用指南一、系统概述扣费系统是算力平台的核心计费模块，支持包月预付费和按小时后付费两种计费方式。系统已完全集成到 pay 模块中。 核心功能 包月扣费（预付费）：一次性扣除整月费用 按小时扣费（后付费）：首小时扣费 + 周期续扣 退款处理：订单取消或失败时的退款 定时任务：自动执行周期续扣和对账 同步调用：直接调用扣费服务，实时返回结果  二、数据库表结构1. 扣费记录表表名：tgkw_deduction_record SQL文件位置：sql/mysql/system/deduction_record.sql 执行以下SQL创建表： 12-- 在你的MySQL数据库中执行source sql/mysql/system/deduction_record.sql;  三、API接口说明1. 创建扣费接口地址： POST /admin-api/pay/deduction/create 权限： pay:deduction:create 请求示例（包月）： 1234567891011&#123;  &quot;orderNo&quot;: &quot;ORD20231201001&...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/code-learning/%E4%BB%A3%E7%A0%81%E5%BC%80%E5%8F%91%E5%AD%A6%E4%B9%A0/%E6%89%A3%E8%B4%B9%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%8E%A5%E6%96%87%E6%A1%A3/" title="扣费系统对接文档">扣费系统对接文档</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2025-12-09T16:00:00.000Z" title="发表于 2025-12-10 00:00:00">2025-12-10</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/code-learning/">代码开发学习</a></span></div><div class="content">扣费系统对接文档1. 概述扣费系统为订单系统提供统一的扣费和退款能力，支持一次性扣费和周期性扣费两种模式。 核心能力：  一次性扣费（包月预付费） 周期扣费（按小时后付费） 全额退款和部分退款 停止周期扣费 余额预警（提前3天和1天预警） 幂等性保证  服务信息：  服务名称：pay-server 基础路径：&#x2F;admin-api&#x2F;pay&#x2F;deduction  快速导航：  如何对接扣费接口：见 第2章：快速开始 如何使用余额预警：见 第7.4节：订单系统如何使用 消息推送说明：见 第6章：消息推送 典型场景示例：见 第5章：典型场景  2. 快速开始2.1 添加依赖12345&lt;dependency&gt;    &lt;groupId&gt;cn.ksxzcx.cloud&lt;/groupId&gt;    &lt;artifactId&gt;tgwk-module-pay-api&lt;/artifactId&gt;    &lt;version&gt;$&#123;project.version&#125;&lt;/version&gt;...</div></div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/#content-inner">2</a><a class="page-number" href="/page/3/#content-inner">3</a><a class="extend next" rel="next" href="/page/2/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/butterfly-icon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Goppop</div><div class="author-info-description">周期越大，结构越清晰</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">22</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">18</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Goppop"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/trading-log/%E4%BA%A4%E6%98%93/%E4%BA%A4%E6%98%93%E8%AE%B0%E5%BD%95%EF%BC%9AETH%20%E5%90%88%E7%BA%A6%E5%A4%9A%E5%8D%95/" title="交易记录">交易记录</a><time datetime="2025-12-21T16:00:00.000Z" title="发表于 2025-12-22 00:00:00">2025-12-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/code-learning/%E4%BB%A3%E7%A0%81%E5%BC%80%E5%8F%91%E5%AD%A6%E4%B9%A0/Java%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%EF%BC%88JUC%EF%BC%89%E9%AB%98%E7%BA%A7%E7%BB%84%E4%BB%B6%E4%B8%8E%E5%8E%9F%E7%90%86%EF%BC%9A%E4%BB%8E%20AQS%20%E5%88%B0%E5%B9%B6%E5%8F%91%E5%AE%B9%E5%99%A8%20(1)/" title="Java 并发编程（JUC）高级组件与原理：从 AQS 到并发容器">Java 并发编程（JUC）高级组件与原理：从 AQS 到并发容器</a><time datetime="2025-12-16T16:00:00.000Z" title="发表于 2025-12-17 00:00:00">2025-12-17</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/code-learning/%E4%BB%A3%E7%A0%81%E5%BC%80%E5%8F%91%E5%AD%A6%E4%B9%A0/Spring%20Boot%20%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E4%B8%8E%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%EF%BC%9AAOP%E3%80%81IOC%20%E4%B8%8E%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE/" title="Spring Boot 核心原理与源码解析：AOP、IOC 与自动配置">Spring Boot 核心原理与源码解析：AOP、IOC 与自动配置</a><time datetime="2025-12-16T16:00:00.000Z" title="发表于 2025-12-17 00:00:00">2025-12-17</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/code-learning/programming-basics/jvm/%E4%BB%A3%E7%A0%81%E5%BC%80%E5%8F%91%E5%AD%A6%E4%B9%A0/JVM-%E5%85%A5%E9%97%A8%E6%A6%82%E8%A7%88/" title="JVM-入门概览">JVM-入门概览</a><time datetime="2025-12-11T16:00:00.000Z" title="发表于 2025-12-12 00:00:00">2025-12-12</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/code-learning/programming-basics/jvm/%E4%BB%A3%E7%A0%81%E5%BC%80%E5%8F%91%E5%AD%A6%E4%B9%A0/JVM-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/" title="JVM-垃圾回收机制详解">JVM-垃圾回收机制详解</a><time datetime="2025-12-11T16:00:00.000Z" title="发表于 2025-12-12 00:00:00">2025-12-12</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
          </div>
          <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/trading/"><span class="card-category-list-name">交易</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/trading-log/"><span class="card-category-list-name">交易记录</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/code-learning/"><span class="card-category-list-name">代码开发学习</span><span class="card-category-list-count">16</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/code-learning/programming-basics/"><span class="card-category-list-name">01-编程语言基础</span><span class="card-category-list-count">3</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/code-learning/programming-basics/jvm/"><span class="card-category-list-name">JVM</span><span class="card-category-list-count">3</span></a></li></ul></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/pricing-system/"><span class="card-category-list-name">录价系统</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/data-consistency/"><span class="card-category-list-name">数据一致性</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/production-review/"><span class="card-category-list-name">生产复盘</span><span class="card-category-list-count">1</span></a></li>
          </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/JVM%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E3%80%81JVM%E8%B0%83%E4%BC%98/" style="font-size: 1.1em; color: #999">JVM内存模型、JVM调优</a> <a href="/tags/SMS%E7%9F%AD%E4%BF%A1%E6%9C%8D%E5%8A%A1/" style="font-size: 1.1em; color: #999">SMS短信服务</a> <a href="/tags/%E8%B6%8B%E5%8A%BF%E4%BA%A4%E6%98%93/" style="font-size: 1.3em; color: #99a1ac">趋势交易</a> <a href="/tags/%E4%BB%A3%E7%A0%81%E5%BC%80%E5%8F%91%E5%AD%A6%E4%B9%A0/" style="font-size: 1.1em; color: #999">代码开发学习</a> <a href="/tags/%E7%94%9F%E4%BA%A7%E9%97%AE%E9%A2%98/" style="font-size: 1.1em; color: #999">生产问题</a> <a href="/tags/JVM/" style="font-size: 1.3em; color: #99a1ac">JVM</a> <a href="/tags/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/" style="font-size: 1.1em; color: #999">解决方案</a> <a href="/tags/Redis/" style="font-size: 1.1em; color: #999">Redis</a> <a href="/tags/AOP%E3%80%81IOC/" style="font-size: 1.1em; color: #999">AOP、IOC</a> <a href="/tags/%E5%9F%BA%E4%BA%8Eeasyexcel%E7%9A%84%E7%99%BE%E4%B8%87%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/" style="font-size: 1.1em; color: #999">基于easyexcel的百万数据处理</a> <a href="/tags/%E7%B3%BB%E7%BB%9F%E5%BC%80%E5%8F%91/" style="font-size: 1.5em; color: #99a9bf">系统开发</a> <a href="/tags/%E6%9E%B6%E6%9E%84%E6%80%9D%E8%B7%AF/" style="font-size: 1.1em; color: #999">架构思路</a> <a href="/tags/%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8/" style="font-size: 1.1em; color: #999">布隆过滤器</a> <a href="/tags/%E5%BD%95%E4%BB%B7%E7%B3%BB%E7%BB%9F/" style="font-size: 1.1em; color: #999">录价系统</a> <a href="/tags/MapStruct/" style="font-size: 1.1em; color: #999">MapStruct</a> <a href="/tags/%E5%88%86%E7%B1%BB%E6%A6%82%E8%A7%88/" style="font-size: 1.1em; color: #999">分类概览</a> <a href="/tags/%E5%85%A5%E9%97%A8%E6%A6%82%E8%A7%88/" style="font-size: 1.1em; color: #999">入门概览</a> <a href="/tags/JUC/" style="font-size: 1.1em; color: #999">JUC</a></div></div><div class="card-widget card-archives">
    <div class="item-headline">
      <i class="fas fa-archive"></i>
      <span>归档</span>
      
    </div>
  
    <ul class="card-archive-list">
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/12/">
            <span class="card-archive-list-date">
              十二月 2025
            </span>
            <span class="card-archive-list-count">12</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/11/">
            <span class="card-archive-list-date">
              十一月 2025
            </span>
            <span class="card-archive-list-count">2</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/09/">
            <span class="card-archive-list-date">
              九月 2025
            </span>
            <span class="card-archive-list-count">2</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/08/">
            <span class="card-archive-list-date">
              八月 2025
            </span>
            <span class="card-archive-list-count">1</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/06/">
            <span class="card-archive-list-date">
              六月 2025
            </span>
            <span class="card-archive-list-count">1</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/04/">
            <span class="card-archive-list-date">
              四月 2025
            </span>
            <span class="card-archive-list-count">4</span>
          </a>
        </li>
      
    </ul>
  </div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站信息</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">22</div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2025-12-23T06:31:47.195Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 By Goppop</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 8.1.1</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.3-b1</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.3-b1"></script><script src="/js/main.js?v=5.5.3-b1"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>